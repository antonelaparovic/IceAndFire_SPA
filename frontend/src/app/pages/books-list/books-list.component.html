<section class="page">
    <h1>Books</h1>

    <p *ngIf="loading$ | async">Loading...</p>
    <p *ngIf="(error$ | async) as err">{{ err }}</p>

    <ul class="list" *ngIf="!(loading$ | async)">
        <li *ngFor="let b of (books$ | async)">
            <a [routerLink]="['/books', b.id]"><strong>{{ b.name }}</strong></a>
            <div class="meta">
                <span *ngIf="b.authors?.length">{{ b.authors.join(', ') }}</span>
                <span *ngIf="b.released"> Â· {{ b.released | date:'yyyy-MM-dd' }}</span>
            </div>
            <button type="button" (click)="toggleFav(b.id)">
                {{ (isFav$(b.id) | async) ? 'Remove' : 'Add' }}
            </button>
        </li>
    </ul>
</section>