<section class="page">
    <h1>Books</h1>

    <div class="pager">
        <span></span>
    </div>

    <p *ngIf="loading$ | async">Loading...</p>
    <p *ngIf="(error$ | async) as err" class="error">{{ err }}</p>

    <input class="search" type="text" [formControl]="search" placeholder="Search books..." />

    <ul class="list" *ngIf="!(loading$ | async)">
        <li *ngFor="let b of (books$ | async)" class="card-row">
            <div class="card-content">
                <a [routerLink]="['/books', b.id]" class="card-title">
                    <strong>{{ b.name }}</strong>
                </a>

                <div class="meta">
                    <span *ngIf="b.authors?.length">{{ b.authors.join(', ') }}</span>
                    <span *ngIf="b.released"> Â· {{ b.released | date: 'yyyy-MM-dd' }}</span>
                </div>
            </div>

            <app-favourite-button [active]="(isFav$(b.id) | async) === true"
                [ariaLabel]="((isFav$(b.id) | async) ? 'Remove from favourites' : 'Add to favourites')"
                (toggle)="toggleFav(b.id)">
            </app-favourite-button>
        </li>
    </ul>
</section>